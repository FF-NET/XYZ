<!DOCTYPE html>
<script type='text/javascript' charset='UTF-8'>
	var inappdeny_exec_vanillajs = (callback) => {
		if(document.readyState != 'loading'){
			callback();
		}else{
			document.addEventListener('DOMContentLoaded', callback);
		} 
	}
	inappdeny_exec_vanillajs(() => { 
		/* Do things after DOM has fully loaded */ 
		function copytoclipboard(val){
			var t = document.createElement("textarea");
			document.body.appendChild(t);
			t.value = val;
			t.select();
			document.execCommand('copy');
			document.body.removeChild(t);
		};
		function inappbrowserout(){
			copytoclipboard(window.location.href);
			alert('URL주소가 복사되었습니다.\n\nSafari가 열리면 주소창을 길게 터치한 뒤, "붙여놓기 및 이동"를 누르면 정상적으로 이용하실 수 있습니다.');
			location.href='http://b35.xyz/240629';;
		};

		var useragt = navigator.userAgent.toLowerCase();
		var target_url = 'http://b35.xyz/240629';
		
		if(useragt.match(/kakaotalk/i)){
			
			//카카오톡 외부브라우저로 호출
			location.href = 'kakaotalk://web/openExternal?url='+encodeURIComponent(target_url);
			
		}else if(useragt.match(/line/i)){
			
			//라인 외부브라우저로 호출
			if(target_url.indexOf('?') !== -1){
				location.href = target_url+'&openExternalBrowser=1';
			}else{
				location.href = target_url+'?openExternalBrowser=1';
			}
			/*
		}else if(useragt.match(/inapp|naver|snapchat|wirtschaftswoche|thunderbird|instagram|everytimeapp|whatsApp|electron|wadiz|aliapp|zumapp|iphone(.*)whale|android(.*)whale|kakaostory|band|twitter|DaumApps|DaumDevice\/mobile|FB_IAB|FB4A|FBAN|FBIOS|FBSS|SamsungBrowser\/[^1]/i)){
			
			//그외 다른 인앱들
			if(useragt.match(/iphone|ipad|ipod/i)){
				
				//아이폰은 강제로 사파리를 실행할 수 없다 ㅠㅠ
				//모바일대응뷰포트강제설정
				var mobile = document.createElement('meta');
				mobile.name = 'viewport';
				mobile.content = "width=device-width, initial-scale=1, shrink-to-fit=no, user-scalable=no, minimal-ui";
				document.getElementsByTagName('head')[0].appendChild(mobile);
				//노토산스폰트강제설정
				var fonts = document.createElement('link');
				fonts.href = 'https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100;300;400;500;700;900&display=swap';
				document.getElementsByTagName('head')[0].appendChild(fonts);
				document.body.innerHTML = "<style>body{margin:0;padding:0;font-family: 'Noto Sans KR', sans-serif;overflow: hidden;height: 100%;}</style><h2 style='padding-top:50px; text-align:center;font-family: 'Noto Sans KR', sans-serif;'>인앱브라우저 호환문제로 인해<br />Safari로 접속해야합니다.</h2><article style='text-align:center; font-size:17px; word-break:keep-all;color:#999;'>아래 버튼을 눌러 Safari를 실행해주세요<br />Safari가 열리면, 주소창을 길게 터치한 뒤,<br />'붙여놓기 및 이동'을 누르면<br />정상적으로 이용할 수 있습니다.<br /><br /><button onclick='inappbrowserout();' style='min-width:180px;margin-top:10px;height:54px;font-weight: 700;background-color:#31408E;color:#fff;border-radius: 4px;font-size:17px;border:0;'>Safari로 열기</button></article><img style='width:70%;margin:50px 15% 0 15%' src='https://tistory3.daumcdn.net/tistory/1893869/skin/images/inappbrowserout.jpeg' />";
			
			}else{
				//안드로이드는 Chrome이 설치되어있음으로 강제로 스킴실행한다.
				location.href='intent://'+target_url.replace(/https?:\/\//i,'')+'#Intent;scheme=http;package=com.android.chrome;end';
			}*/
		}
	});
</script>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Create an AudioContext
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();

        // Create an empty buffer
        const buffer = audioContext.createBuffer(1, audioContext.sampleRate * 1, audioContext.sampleRate);
        const data = buffer.getChannelData(0);
        for (let i = 0; i < data.length; i++) {
            data[i] = Math.random() * 2 - 1;  // Fill the buffer with white noise
        }

        // Create a buffer source
        const source = audioContext.createBufferSource();
        source.buffer = buffer;
        source.loop = true;

        // Connect the source to the audio context's destination (the speakers)
        source.connect(audioContext.destination);

        // Start the source playing
        source.start();

        // Set the audio context to active
        audioContext.resume().then(() => {
            console.log('Playback started');
        }).catch((error) => {
            console.error('Error resuming audio context:', error);
        });
    });
</script>

<html>
    <head>
        <meta charset="UTF-8">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
        <meta name="viewport" content="user-scalable=no">
        <link rel="icon" href="icon/icon.png" type="image/png">
        <link rel="apple-touch-icon" href="icon/icon.png">
        <link rel="stylesheet" type="text/css" href="css/game.css">
        <title>B-35</title>
        <style>
            /* 스타일 설정 */
            #startButton {
                position: fixed;
                bottom: 10px;
                left: 10px;
                padding: 10px 20px;
                font-size: 16px;
                background-color: #4CAF50; /* 버튼 배경색 */
                color: white; /* 버튼 텍스트 색 */
                border: none;
                border-radius: 5px;
                cursor: pointer;
                z-index: 1000; /* 버튼을 다른 요소들 위에 표시 */
            }
        </style>
        
    </head>
    <body style="background-color: black">
        
        <script type="text/javascript" src="js/main.js"></script>
        <!-- 사운드 시작 버튼 -->
    <button id="startButton">Sound</button>
    <script>
        var context = new (window.AudioContext || window.webkitAudioContext)();
        var soundBuffer = null;

        function loadSound(url) {
            var request = new XMLHttpRequest();
            request.open('GET', url, true);
            request.responseType = 'arraybuffer';

            // Decode asynchronously
            request.onload = function() {
                context.decodeAudioData(request.response, function(buffer) {
                    soundBuffer = buffer;
                }, function(error) {
                    console.error('Error decoding audio data:', error);
                });
            }
            request.send();
        }

        function playSound() {
            var source = context.createBufferSource();
            source.buffer = soundBuffer;
            source.connect(context.destination);
            source.start(0);
        }

        document.getElementById('startButton').addEventListener('click', function() {
            // Load a sound file from your RPG Maker MZ project's audio folder
            loadSound('audio/se/Decision1.ogg'); // 예제: RPG Maker MZ의 기본 사운드 파일 경로

            // Once the sound is loaded, play it
            context.resume().then(() => {
                if (soundBuffer) {
                    playSound();
                } else {
                    console.log('Sound buffer is not yet loaded.');
                }
            }).catch((error) => {
                console.error('Error resuming audio context:', error);
            });

            // Hide the start button after it's clicked
            this.style.display = 'none';
        });
    </script>
    </body>

</html>
